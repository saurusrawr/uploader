<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Chat Bot - Saurus Official</title>
<style>
  body, html { margin:0; padding:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; height:100%; overflow:hidden; background:#fefefe; color:#111;}
  header { position:fixed; top:0; left:0; right:0; background:#fff; border-bottom:1px solid #ddd; padding:10px 20px; z-index:1000; display:flex; justify-content:space-between; align-items:center; }
  header h1 { margin:0; font-size:1.5rem; color:#0f172a; }
  .menu-btn { font-size:1.5rem; cursor:pointer; background:none; border:none; }

  #videoContainer { width:100%; height:300px; overflow:hidden; position:relative; top:50px; }
  #videoContainer video { width:100%; height:100%; object-fit:cover; }

  main { position:absolute; top:350px; bottom:0; left:0; right:0; padding:10px 20px; overflow:hidden; display:flex; flex-direction:column; }

  .chat-container { flex:1; overflow-y:auto; display:flex; flex-direction:column; border:1px solid #ddd; border-radius:12px; padding:10px; background:#fff; }
  .message { margin:5px 0; padding:10px 15px; border-radius:12px; max-width:70%; line-height:1.4; word-break:break-word; }
  .user { background:#3b82f6; color:#fff; align-self:flex-end; }
  .bot { background:#e5e7eb; color:#111; align-self:flex-start; }

  .chat-input { display:flex; margin-top:10px; }
  .chat-input input { flex:1; padding:12px; font-size:1rem; border:1px solid #ddd; border-radius:12px 0 0 12px; outline:none; }
  .chat-input button { padding:12px 20px; border:none; background:#3b82f6; color:#fff; font-weight:bold; cursor:pointer; border-radius:0 12px 12px 0; }
  .chat-input button:hover { background:#2563eb; }

  .loading { display:flex; align-items:flex-end; margin:5px 0; }
  .loading .dot { width:8px; height:8px; margin:0 2px; background:#3b82f6; border-radius:50%; animation: bounce 1s infinite; }
  .loading .dot:nth-child(2) { animation-delay:0.2s; }
  .loading .dot:nth-child(3) { animation-delay:0.4s; }
  @keyframes bounce { 0%, 80%, 100% { transform:scale(0); } 40% { transform:scale(1); } }

  .chat-container::-webkit-scrollbar { width:6px; }
  .chat-container::-webkit-scrollbar-thumb { background:#3b82f6; border-radius:3px; }
  .chat-container::-webkit-scrollbar-track { background:#f1f1f1; }
</style>
</head>
<body>

<header>
  <h1>AI Chat Bot ü§ñ</h1>
  <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
  <div id="mobileMenu" style="display:none; position:absolute; top:50px; right:20px; background:#fff; border:1px solid #ddd; border-radius:8px; box-shadow:2px 2px 0 #000; flex-direction:column;">
    <a href="#">Beranda</a>
    <a href="#">Buat Website</a>
  </div>
</header>

<div id="videoContainer">
  <video src="https://a.top4top.io/m_3691w491s1.mp4" autoplay loop muted></video>
</div>

<main>
  <div class="chat-container" id="chatContainer">
    <div class="message bot">Halo! Aku Zentx Bot üêæ, ada yang ingin kamu tanyakan?</div>
  </div>

  <div class="chat-input">
    <input type="text" id="userInput" placeholder="Ketik pesanmu di sini...">
    <button onclick="sendMessage()">Kirim</button>
  </div>
</main>

<script>
  const chatContainer = document.getElementById('chatContainer');
  const userInput = document.getElementById('userInput');
  const mobileMenu = document.getElementById('mobileMenu');
  let lastUserMessage = '';

  function toggleMenu() { mobileMenu.style.display = mobileMenu.style.display==='flex'?'none':'flex'; }

  function appendMessage(msg, type) {
    const div = document.createElement('div');
    div.classList.add('message', type);

    // Bold semua **teks**
    div.innerHTML = msg.replace(/\*\*(.*?)\*\*/g,'<b>$1</b>');

    chatContainer.appendChild(div);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  function appendLoading() {
    const div = document.createElement('div');
    div.classList.add('loading');
    div.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
    chatContainer.appendChild(div);
    chatContainer.scrollTop = chatContainer.scrollHeight;
    return div;
  }

  async function sendMessage() {
    const message = userInput.value.trim();
    if (!message) return;

    appendMessage(message, 'user');
    userInput.value = '';

    const promptMessage = lastUserMessage ? `sebelumnya: ${lastUserMessage} | sekarang: ${message}` : message;
    lastUserMessage = message;

    const loadingDiv = appendLoading();

    try {
      const apiKey = "alipaiapikeybaru";
      const url = `https://alipai-api.vercel.app/ai/gemini?apikey=${apiKey}&prompt=${encodeURIComponent(
        `Kamu adalah Zentx Bot, kamu diciptakan oleh Saurus. Jawab dengan cerdas, bisa menggunakan **bold**. Gunakan emoji imut. Pesan user: ${promptMessage}`
      )}`;

      const res = await fetch(url);
      const data = await res.json();

      loadingDiv.remove();
      if (data.status && data.result) {
        appendMessage(data.result, 'bot');
      } else {
        appendMessage("‚ùå Gagal mendapatkan respons dari API.", 'bot');
      }

    } catch(e) {
      loadingDiv.remove();
      appendMessage("‚ùå Terjadi kesalahan koneksi.", 'bot');
    }
  }

  userInput.addEventListener("keypress", function(e){ if(e.key==="Enter") sendMessage(); });
</script>

</body>
</html>
